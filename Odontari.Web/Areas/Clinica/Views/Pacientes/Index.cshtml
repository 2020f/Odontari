@model IEnumerable<PacienteListViewModel>
@{
    ViewData["Title"] = "Pacientes";
}

<div class="content-header">
    <h1>Pacientes</h1>
    <a asp-action="Create" class="btn-content-primary">+ Nuevo paciente</a>
</div>
<form method="get" class="mb-3">
    <div class="d-flex gap-2 flex-wrap">
        <input type="text" name="q" value="@Context.Request.Query["q"]" placeholder="Buscar nombre, cédula, teléfono" class="form-control" style="max-width: 320px;" />
        <button type="submit" class="btn btn-primary">Buscar</button>
    </div>
</form>
<div class="content-card">
    <table class="table">
        <thead>
            <tr><th>Nombre</th><th>Cédula</th><th>Teléfono</th><th>Activo</th><th></th></tr>
        </thead>
        <tbody>
            @foreach (var p in Model)
            {
                <tr>
                    <td>@p.Nombre @p.Apellidos</td>
                    <td>@p.Cedula</td>
                    <td>@p.Telefono</td>
                    <td>@(p.Activo ? "Sí" : "No")</td>
                    <td>
                        <a asp-controller="Expediente" asp-action="Index" asp-route-id="@p.Id">Expediente</a>
                        |
                        <a asp-action="Edit" asp-route-id="@p.Id">Editar</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    @if (!Model.Any()) { <div class="content-empty">No hay pacientes. <a asp-action="Create">Crear el primero</a></div> }
</div>
