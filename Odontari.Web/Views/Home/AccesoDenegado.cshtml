@using Odontari.Web.Data
@{
    ViewData["Title"] = "Acceso denegado";
    Layout = "~/Views/Shared/_LayoutMinimal.cshtml";
    var urlInicio = "/";
    if (User.Identity?.IsAuthenticated == true)
    {
        if (User.IsInRole(OdontariRoles.SuperAdmin))
            urlInicio = "/Saas/Dashboard/Index";
        else if (User.IsInRole(OdontariRoles.AdminClinica) || User.IsInRole(OdontariRoles.Recepcion) || User.IsInRole(OdontariRoles.Doctor) || User.IsInRole(OdontariRoles.Finanzas))
            urlInicio = "/Clinica/Home/Index";
    }
}
@section Styles {
    <style>
        .ad-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            margin: 0;
            box-sizing: border-box;
            background: linear-gradient(160deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
        }
        .ad-card {
            max-width: 460px;
            width: 100%;
            text-align: center;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.04);
            padding: 2.5rem 2.25rem;
            margin: 0 auto;
        }
        .ad-icon-wrap {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(145deg, #fef2f2 0%, #fee2e2 100%);
            color: #dc2626;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(220, 38, 38, 0.15);
        }
        .ad-icon-wrap svg { width: 42px; height: 42px; }
        .ad-card h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }
        .ad-card .ad-text {
            color: #64748b;
            font-size: 0.9375rem;
            line-height: 1.6;
            margin-bottom: 1.75rem;
        }
        .ad-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: center;
        }
        .ad-btn-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9375rem;
            text-decoration: none;
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: #fff;
            border: none;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.35);
        }
        .ad-btn-primary:hover {
            color: #fff;
            transform: translateY(-1px);
            box-shadow: 0 4px 14px rgba(99, 102, 241, 0.4);
        }
        .ad-link-inicio {
            color: #64748b;
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            transition: color 0.2s ease;
        }
        .ad-link-inicio:hover { color: #6366f1; }
    </style>
}

<div class="ad-page">
    <div class="ad-card">
        <div class="ad-icon-wrap" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
            </svg>
        </div>
        <h1>Acceso denegado</h1>
        <p class="ad-text">No tiene autorización para acceder a esta sección. Si debe usar otra cuenta (clínica o super administrador), cierre sesión e inicie de nuevo.</p>
        <div class="ad-actions">
            <a asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="/Identity/Account/Login" class="ad-btn-primary">Cerrar sesión e iniciar con otra cuenta</a>
            <a href="@urlInicio" class="ad-link-inicio">← Volver al inicio</a>
        </div>
    </div>
</div>
